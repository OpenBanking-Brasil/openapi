name: Comentar no PR o diff das specs
on: 
  pull_request:
    types: [opened]
    branches:
      - "main"
jobs:
  list_diff:
    runs-on: ubuntu-latest
    steps:
      - name: Realizar o diff entre arquivos
        uses: oasdiff/oasdiff-action/diff@main
        id: job1
        env:
          GITHUB_TOKEN: ${{ secrets.OASDIFF_TOKEN }}
        with:
          base: './swagger-apis/automatic-payments/1.0.0-beta.1.yml'
          revision: './swagger-apis/automatic-payments/1.0.0-beta.2.yml'
  comment_diff:
    runs-on: ubuntu-latest
    steps:
     - name: Criar o coment√°rio no PR
       uses: mshick/add-pr-comment@v2
       env:
        GITHUB_TOKEN: ${{ secrets.OASDIFF_TOKEN }}       
       with:
         message: |
           ${{ steps.job1.outputs }}

